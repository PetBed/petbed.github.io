<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Composting Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

    /* --- NEW COLOR PALETTE --- */
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f8fbf7;
      /* Light pastel green/white */
      color: #374151;
      /* Default dark text (gray-700) */
    }

    /* --- Gauge Styles (Recolored) --- */
    .gauge-container {
      position: relative;
      width: 150px;
      height: 75px;
      overflow: hidden;
    }

    .gauge-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #e5e7eb;
      /* Light gray (gray-200) */
      border-radius: 150px 150px 0 0;
    }

    .gauge-fill {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      /* Kept the green-yellow-red gradient as it's good for status */
      background: linear-gradient(90deg, #48bb78, #f6e05e, #f56565);
      border-radius: 150px 150px 0 0;
      transform-origin: center bottom;
      transition: transform 0.5s ease-in-out;
    }

    .gauge-cover {
      position: absolute;
      top: 5%;
      left: 5%;
      width: 90%;
      height: 90%;
      background: #f8fbf7;
      /* Match body background */
      border-radius: 150px 150px 0 0;
    }

    .gauge-needle {
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 2px;
      height: 70px;
      background: #1f2937;
      /* Dark (gray-800) */
      transform-origin: bottom center;
      transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      border-radius: 2px;
    }

    /* --- Card & Status Styles (Recolored) --- */
    .card {
      background-color: #ffffff;
      /* Plain white cards */
      border-radius: 1rem;
      padding: 1.5rem;
      color: #374151;
      /* Dark text (gray-700) */
      /* Softer shadow for light background */
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.04);
    }

    .status-dot {
      height: 1rem;
      width: 1rem;
      border-radius: 9999px;
      display: inline-block;
    }

    .dot-green {
      background-color: #48bb78;
      /* Kept vibrant green (green-500) */
    }
  </style>
</head>

<body class="p-4 sm:p-6 md:p-8">
  <div class="max-w-6xl mx-auto">
    <header class="flex flex-col sm:flex-row justify-between items-center mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4 sm:mb-0">
        <i class="fas fa-recycle text-green-600"></i> Chicken Manure  Dashboard
      </h1>
      <div id="connection-status" class="text-sm text-gray-500 flex items-center">
        <span class="status-dot dot-green mr-2"></span> System Online
      </div>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

      <div class="card lg:col-span-3">
        <h2 class="text-xl font-semibold mb-6 text-gray-700">Compost Progress</h2>

        <div class="flex items-start">
          <div class="flex-1 flex flex-col items-center">
            <div
              class="w-10 h-10 rounded-full bg-green-500 border-2 border-green-500 flex items-center justify-center font-bold text-white">
              1</div>
            <div class="text-sm mt-2 text-green-600 text-center">Collect Materials</div>
          </div>
          <div class="flex-1 h-1 bg-green-500 mt-5"></div>

          <div class="flex-1 flex flex-col items-center">
            <div
              class="w-10 h-10 rounded-full bg-green-500 border-2 border-green-500 flex items-center justify-center font-bold text-white">
              2</div>
            <div class="text-sm mt-2 text-green-600 text-center">Layering and Moisturising</div>
          </div>
          <div class="flex-1 h-1 bg-green-500 mt-5"></div>

          <div class="flex-1 flex flex-col items-center">
            <div
              class="w-10 h-10 rounded-full bg-green-500 border-2 border-green-500 flex items-center justify-center font-bold text-white">
            3</div>
            <div class="text-sm mt-2 text-gray-500 text-center">Set up Sensors</div>
          </div>
          <div class="flex-1 h-1 bg-green-500 mt-5"></div>
          <div class="flex-1 flex flex-col items-center">
            <div
              class="w-12 h-12 rounded-full bg-green-600 border-2 border-green-600 flex items-center justify-center font-bold text-lg text-white ring-4 ring-green-600/30">
              4</div>
            <div class="text-sm mt-2 text-green-700 font-semibold text-center">Composting</div>
          </div>
          <div class="flex-1 h-1 bg-gray-300 mt-5"></div>

          <div class="flex-1 flex flex-col items-center">
            <div
              class="w-10 h-10 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center font-bold text-gray-500">
              5</div>
            <div class="text-sm mt-2 text-gray-500 text-center">Curing</div>
          </div>
          <div class="flex-1 h-1 bg-gray-300 mt-5"></div>

          <div class="flex-1 flex flex-col items-center">
            <div
              class="w-10 h-10 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center font-bold text-gray-500">
              6</div>
            <div class="text-sm mt-2 text-gray-500 text-center">Ready</div>
          </div>
        </div>

        <div class="mt-8 pt-6 border-t border-gray-200">
          <h3 class="text-lg font-semibold text-green-700">Current Step: (4) Composting Stage</h3>
          <p class="mt-2 text-gray-600">
            The compost pile is now in its active heating phase as bacteria work to break down materials.
            <br><strong>You should:</strong> Monitor the temperature closely. If it exceeds 70째C (158째F), the dashboard will alert you and the motor will automatically turn the pile. Checking up on the compost is periodically or upon receiving an alert is advised.
          </p>
        </div>
      </div>

      <div class="card">
        <h2 class="text-xl font-semibold mb-4 text-gray-600">Moisture Level</h2>
        <div class="flex flex-col sm:flex-row items-center justify-around text-center">
          <div class="gauge-container mb-4 sm:mb-0">
            <div class="gauge-bg"></div>
            <div class="gauge-fill"></div>
            <div class="gauge-cover"></div>
            <div id="moisture-needle" class="gauge-needle"></div>
          </div>
          <div class="flex flex-col items-center justify-center">
            <p class="text-5xl font-bold text-gray-900" id="moisture-level">45<span
                class="text-3xl text-gray-500">%</span></p>
            <p class="text-gray-500 mt-1">Optimal: 40-60%</p>
          </div>
        </div>
      </div>

      <div class="card">
        <h2 class="text-xl font-semibold mb-4 text-gray-600">Temperature</h2>
        <div class="flex flex-col sm:flex-row items-center justify-around text-center">
          <div class="gauge-container mb-4 sm:mb-0">
            <div class="gauge-bg"></div>
            <div class="gauge-fill"></div>
            <div class="gauge-cover"></div>
            <div id="temp-needle" class="gauge-needle"></div>
          </div>
          <div class="flex flex-col items-center justify-center">
            <p class="text-5xl font-bold text-gray-900" id="temperature">60<span
                class="text-3xl text-gray-500">째C</span></p>
            <p class="text-gray-500 mt-1">Thermophilic Stage</p>
          </div>
        </div>
      </div>

      <div class="card">
        <h2 class="text-xl font-semibold mb-4 text-gray-600">Oxygen Level</h2>
        <div class="flex flex-col sm:flex-row items-center justify-around text-center">
          <div class="gauge-container mb-4 sm:mb-0">
            <div class="gauge-bg"></div>
            <div class="gauge-fill"></div>
            <div class="gauge-cover"></div>
            <div id="oxygen-needle" class="gauge-needle"></div>
          </div>
          <div class="flex flex-col items-center justify-center">
            <p class="text-5xl font-bold text-gray-900" id="oxygen-level">18<span
                class="text-3xl text-gray-500">%</span></p>
            <p class="text-gray-500 mt-1">Ideal: >15%</p>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    // No API calls needed. We just set the static placeholder values for the gauges.
    document.addEventListener('DOMContentLoaded', () => {

      // --- Placeholder Data ---
      const moisture = 45; // Placeholder value (0-100)
      const temperature = 60; // Placeholder value (0-100, assuming 100째C max for gauge)
      const oxygen = 18; // Placeholder value (0-25, assuming 25% max for gauge)

      // --- Get Needle Elements ---
      const moistureNeedle = document.getElementById('moisture-needle');
      const tempNeedle = document.getElementById('temp-needle');
      const oxygenNeedle = document.getElementById('oxygen-needle');

      // --- Set Gauge Positions ---
      // The logic is: (value / max_value) * 180_degrees - 90_degrees

      // Set Moisture (0-100 scale)
      let moistureAngle = (Math.min(Math.max(moisture, 0), 100) / 100) * 180 - 90;
      moistureNeedle.style.transform = `rotate(${moistureAngle}deg)`;

      // Set Temperature (0-100 scale)
      let tempAngle = (Math.min(Math.max(temperature, 0), 100) / 100) * 180 - 90;
      tempNeedle.style.transform = `rotate(${tempAngle}deg)`;

      // Set Oxygen (0-25 scale)
      let oxygenAngle = (Math.min(Math.max(oxygen, 0), 25) / 25) * 180 - 90;
      oxygenNeedle.style.transform = `rotate(${oxygenAngle}deg)`;

    });
  </script>
</body>

</html>