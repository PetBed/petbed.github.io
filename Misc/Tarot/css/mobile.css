/* --- MOBILE HEADER VISUALS --- */
@media (max-width: 768px) {
    .mobile-header {
        display: flex; /* Show on mobile */
        background: var(--bg-sidebar);
        padding: 1rem 1.5rem;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid var(--border-subtle);
        width: 100%;
        flex-shrink: 0;
        z-index: 50;
        position: relative;
    }
}

/* =========================================
   RESPONSIVE OVERRIDES (Max Width 768px)
   ========================================= */
@media (max-width: 768px) {
    /* Layout Reset */
    body { flex-direction: column; }
    .app-layout { flex-direction: column; }
    
    .sidebar {
        position: fixed; top: 0; left: -280px; height: 100vh; width: 260px;
        box-shadow: 4px 0 15px rgba(0,0,0,0.5);
    }
    .sidebar.open { transform: translateX(280px); }
    .desktop-only { display: none !important; }

    /* Content Area */
    #app-content { padding: 1rem 1rem 5rem 1rem; }

    /* Grids */
    .dashboard-grid, .readings-grid, .card-grid { grid-template-columns: 1fr; }

    /* --- EDITOR OVERLAY SCROLLING FIX --- */
    .editor-layout, .card-study-layout { 
        flex-direction: column; 
        overflow-y: auto; 
        overflow-x: hidden;
        height: 100%;
        min-height: 0;
    }

    /* Reset widths and heights for stacking */
    .journal-sidebar, .card-study-visual { 
        width: 100%; min-width: 0; max-width: none;
        border-right: none; border-bottom: 1px solid var(--border-subtle);
        height: auto; padding: 1.5rem 1rem;
        overflow: visible; flex-shrink: 0;
    }

    .canvas-area, .card-study-notebook { 
        flex: none; min-height: 400px; height: auto;
        padding: 1.5rem 1rem; overflow: visible; 
    }

    /* Hide Resizer on Mobile */
    .layout-resizer { display: none; }

    .notebook-split-grid { grid-template-columns: 1fr; gap: 1rem; }
    .keywords-grid { grid-template-columns: 1fr; }
    
    .editor-header h2 { font-size: 1.2rem; }
    .editor-header { padding: 0.75rem 1rem; }

    /* Builder */
    .builder-layout { flex-direction: column; height: auto; }
    .builder-sidebar { width: 100%; order: -1; margin-bottom: 1rem; }
    .tarot-table { height: 400px; }

    .wrap-mobile { flex-wrap: wrap; gap: 10px; }
    .flex-col-mobile { flex-direction: column; width: 100%; align-items: stretch; margin-top: 10px; }
    .flex-col-mobile > * { width: 100% !important; margin-bottom: 5px; }
    
    .modal-content { width: 95%; max-height: 90vh; }
    .card-grid { grid-template-columns: repeat(3, 1fr); }
}