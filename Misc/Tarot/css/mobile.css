/* =========================================
   RESPONSIVE DESIGN (Max Width 768px)
   ========================================= */
@media (max-width: 768px) {
    /* Layout Reset */
    body { flex-direction: column; }
    .app-layout { flex-direction: column; }
    
    /* Header & Sidebar */
    .mobile-header { display: flex; }
    
    .sidebar {
        position: fixed;
        top: 0;
        left: -280px; /* Width + extra for shadow */
        height: 100vh;
        width: 260px;
        box-shadow: 4px 0 15px rgba(0,0,0,0.5);
    }
    .sidebar.open { transform: translateX(280px); }
    .desktop-only { display: none !important; }

    /* Content Area */
    #app-content { 
        padding: 1rem 1rem 5rem 1rem; /* Bottom padding for scroll */
    }

    /* Grids */
    .dashboard-grid, .readings-grid, .card-grid {
        grid-template-columns: 1fr; /* Full width cards on mobile */
    }

    /* --- EDITOR OVERLAY SCROLLING FIX --- */
    .editor-layout { 
        flex-direction: column; 
        /* Allow the container to scroll vertically */
        overflow-y: auto; 
        overflow-x: hidden;
        /* Ensure it can grow as long as needed */
        height: 87%;
    }

    .journal-sidebar { 
        width: 100%; 
        border-left: none; 
        border-top: 1px solid var(--border-subtle);
        height: auto;
        padding: 1.5rem 1rem;
        /* Don't scroll this individually, let parent handle it */
        overflow: visible; 
        flex-shrink: 0;
    }

    .canvas-area { 
        /* Reset flex properties to allow full growth */
        flex: none; 
        min-height: 400px; /* Ensure space for content */
        height: auto;
        /* Disable internal scrolling, rely on parent */
        overflow: visible; 
    }
    
    .editor-header h2 { font-size: 1.2rem; }
    .editor-header { padding: 0.75rem 1rem; }

    /* Builder */
    .builder-layout { flex-direction: column; height: auto; }
    .builder-sidebar { width: 100%; order: -1; margin-bottom: 1rem; }
    .tarot-table { height: 400px; }

    .wrap-mobile { flex-wrap: wrap; gap: 10px; }
    .flex-col-mobile { flex-direction: column; width: 100%; align-items: stretch; margin-top: 10px; }
    .flex-col-mobile > * { width: 100% !important; margin-bottom: 5px; }
    
    /* Modal */
    .modal-content { width: 95%; max-height: 90vh; }
    .card-grid { grid-template-columns: repeat(3, 1fr); } /* 3 col grid for cards */
}